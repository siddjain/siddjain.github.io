<!-- from https://github.com/jekyll/minima/blob/master/_layouts/default.html -->
<!DOCTYPE html>
<html lang="en"><!-- this file derived from https://github.com/jekyll/minima/blob/v2.0.0/_includes/head.html
     and has following changes:
     - it adds custom-head.html to the original file
     - it adds  page.description to the meta description tag which helps in SEO -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Understanding Quantum Key Distribution (QKD)</title>
  <meta name="description" content="understand how quantum key distribution works">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://siddjain.github.io/2022/07/02/qkd.html">
  <link rel="alternate" type="application/rss+xml" title="siddharth&#39;s space" href="/feed.xml">
  
  <!-- this file overrides https://github.com/jekyll/minima/blob/master/_includes/custom-head.html -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head><body>
    
    <!-- from https://developers.facebook.com/docs/plugins/like-button/ -->
    <!-- I created a new app to get the appID. https://developers.facebook.com/apps/194621285460565/add/ -->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
     src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v9.0&appId=194621285460565&autoLogAppEvents=1"
     nonce="mY2hWZoA"></script><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">siddharth&#39;s space</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- this file is derived from https://github.com/jekyll/minima/blob/master/_layouts/post.html
    and modifies the original to add the FB like button to the post -->
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Understanding Quantum Key Distribution (QKD)</h1>
    <p class="post-meta"><time class="dt-published" datetime="2022-07-02T08:00:00+00:00" itemprop="datePublished">
        Jul 2, 2022
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Siddharth Jain</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Preface from <a href="https://en.wikipedia.org/wiki/Quantum_key_distribution">wikipedia</a>: Quantum key distribution (QKD) is a secure communication method which implements a cryptographic protocol involving
components of quantum mechanics. It enables two parties to produce a shared random secret key known only to them, which can then be used to encrypt and decrypt messages. It is often incorrectly called
quantum cryptography, as it is the best-known example of a quantum cryptographic task.</p>
</div>
<div class="paragraph">
<p>IBM has a good <a href="https://qiskit.org/textbook/ch-algorithms/quantum-key-distribution.html">tutorial</a> on it that explains it using the BB84 protocol. Read it if you like. Here I try to explain QKD in my own words.</p>
</div>
<div class="paragraph">
<p>QKD works by encoding a classical bit string as a string of quantum states. The B92 protocol for example encodes \(0\) as \(|0\rangle\) and \(1\) as \(| + \rangle\).
If you don&#8217;t understand what \(|0\rangle\) and \(| + \rangle\) mean, stop reading and come back when you have understood the basics.
So if Alice has a classical binary string \(1000101011010100\), this will get encoded as \(\Psi = | + 000+0+0++0+0+00\rangle\) and sent over a channel over which Eve might be listening.
In physical terms what happens is that \(16\) photons will be sent over an optical fiber. The photons corresponding to \(0\) will have \(0^{\circ}\) polarization and the photons corresponding to \(1\)
will have \(45^{\circ}\) polarization. There is no entanglement between the photons.</p>
</div>
<div class="paragraph">
<p>You might be thinking how stupid is that. We already know the rule for encoding the binary string - its pretty simple. We can just decode the message \(|\Psi\rangle\) using that rule and get back the original
string of bits. Here is where QM comes in. In QM it is impossible to fully know the complete state of a quantum system (Heisenberg&#8217;s uncertainty principle). Thus Eve has no instrument (think wireshark if you will)
that can take input \(|\Psi\rangle\) (\(|\Psi\rangle\) is nothing but the \(16\) photons we transmitted)
and give \(| + 000+0+0++0+0+00\rangle\) as a readout which she can then decode as \(1000101011010100\).
<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> All she can do is two things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apply a unitary evolution to \(|\Psi\rangle\) to yield another quantum state \(|\Phi\rangle\)</p>
</li>
<li>
<p>Or, make a measurement. Making a measurement requires choosing a basis first of all. Then when a measurement is made, the quantum state will collapse to <em>one</em> of the basis vectors
(very much like we project vectors to a basis in Linear Algebra classes) with a probability given by the Born rule. In the photon example, measurement corresponds to measuring the polarization of the
photons. For this, we have to choose two axes along which we will measure the polarization. This corresponds to fixing the basis.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The measurement destroys the original state unless the state happened to be one of the basis vectors (this follows directly from Linear Algebra). Some examples might help clear this up. Consider the state \(|0\rangle\). This corresponds to
the vector \((1,0)^T\) in Hilbert space. When measured in the \(Z\) basis which I call the canonical (native) basis (it is the canonical or native basis because its made up of the basis vectors
 \((1,0)^T\) and \((0,1)^T\)), the state remains undisturbed and we consider this as measuring \(0\).
But look what happens if \(| + \rangle\) were measured in this basis. \(|+ \rangle\) stands for \((1, 1)^T\) (I have dropped the \(\frac{1}{\sqrt{2}}\) normalization constant for convenience).
Projecting (measuring is the better word) \((1, 1)^T\) onto the canonical basis gives \((1, 0)^T\) or \((0, 1)^T\) with equal probability. The original state is destroyed and this lies at the heart of QKD.
The state that Bob will get will now be different from the state Alice had sent and they will be able to detect this and infer that someone had eavesdropped the channel.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s recap. Imagine Alice wishes to communicate a single bit of classical information. It has two states \(0\) and \(1\) and when its transmitted its transmitted as a quantum state
\(|0\rangle\) or \(|+ \rangle\) respectively. Assume there is no eavesdropping for now. If Bob chooses to measure the received signal in \(Z\) basis, he gets \(0\) for \(|0\rangle\) but \(0\) or \(1\)
with equal probability for \(|+\rangle\). So if Bob measures \(0\), he can&#8217;t be sure whether Alice sent \(0\) or \(1\). But if he measures \(1\), he can be sure that Alice sent \(1\) (it might be
more appropriate to say that Alice meant to communicate a \(1\). I use colloquial language for ease of understanding).</p>
</div>
<div class="paragraph">
<p>Suppose Bob was instead measuring in the \(X\) basis - this basis has the basis vectors \((1,1)^T\) and \((-1,1)^T\). In this basis \(|0\rangle\) will appear (i.e., will be measured) as \(0\) or \(1\)
with equal probability but \(|+ \rangle\) will appear as \(0\) with \(100\%\) probability as \(|+ \rangle\) is a basis vector of the \(X\) basis. So in this basis if Bob measures \(0\),
again he can&#8217;t be sure whether Alice sent a \(0\) or a \(1\), but if he measures \(1\), he can be sure that a \(0\) was sent.</p>
</div>
<div class="paragraph">
<p>Here is the summary in absence of noise or eavesdropping:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. B92 Protocol</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Alice&#8217;s bit (\(a\))</th>
<th class="tableblock halign-left valign-top">\(|\Psi \rangle = f(a)\)</th>
<th class="tableblock halign-left valign-top">Bob&#8217;s basis</th>
<th class="tableblock halign-left valign-top">Bob&#8217;s measurement</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(|0 \rangle\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(Z\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(1\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(|+ \rangle\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(Z\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\) or \(1\) with equal prob.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(|0 \rangle\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(X\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\) or \(1\) with equal prob.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(1\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(|+ \rangle\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(X\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(0\)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Now, to understand the B92 protocol, let&#8217;s put it into action. Let&#8217;s see what happens when we take the happy path, when there is no noise in the channel (equivalently Eve is not eavesdropping)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step-1-alice-generates-a-binary-string-encodes-it-and-transmits-it">Step 1: Alice generates a binary string, encodes it and transmits it</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We covered this step before. Binary string = \(a = 1000101011010100\), message = \(\Psi = |+ 000+0+0++0+0+00\rangle\). Remember Alice keeps \(a\). She does not send it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="step-2-bob-decodes-the-message-using-a-random-basis-he-chooses">Step 2: Bob decodes the message using a random basis he chooses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bob randomly and independently decodes (measures) each qubit using either \(X\) or \(Z\) basis.
Suppose he decided to use \(ZZXZXXXZXZXXXXXX\) for his measurements. Applying Table 1, Bob will get</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8832%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">basis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">observation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The ? are the qubits which he will randomly measure as \(0\) or \(1\) with equal probability.
Remember that Bob does not have access to the top row in above table. It is there for illustration purposes only.
To keep going, suppose he measures (in below I delete the top row from previous table to show Bob&#8217;s view):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
<col style="width: 6.25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="step-3-we-check-if-message-has-been-compromised">Step 3: We check if message has been compromised</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To do this, take a look at the qubits that were measured as \(1\). For example, in above the rightmost qubit is \(1\) and the \(X\) basis was used to measure it.
From preceeding discussion we learned that when \(X\) basis is used for measurement and a \(1\) observation is made, Bob can be certain that a \(0\) was "sent" by Alice.
i.e., in below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8832%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">basis</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">measurement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Wherever there is a \(0\), Bob cannot say what Alice holds at that position, but wherever there is a \(1\) Bob can be confident what Alice holds depending on the basis (\(X\) or \(Z\)).</p>
</div>
<div class="paragraph">
<p>So Bob will ask Alice, is the rightmost bit in \(a\) a \(0\)? If Alice answers no Bob knows that channel has been compromised
(note this assumes Alice&#8217;s answer reaches Bob unmodified). If Alice answers yes there is now a non-zero probability \(p\) that no eavesdropping has occured.
This probability \(p\) increases as more and more bits where we observe \(1s\) are compared.
In above we got total \(6\) \(1s\). We can choose to use \(3\) for testing if channel has not been compromised.
If answer is affirmative then, the remaining \(3\) can be used to share a private key between Alice and Bob.</p>
</div>
<div class="paragraph">
<p>And this is how B92 protocol works.</p>
</div>
<div class="paragraph">
<p>In some sense it is even more simpler (elegant) than the BB84 protocol because here the encoding of classical bits to qubits is well-known in advance. It is a static rule and not dependent
upon another random string generated at runtime as in case of BB84.</p>
</div>
<div class="paragraph">
<p>At heart of QKD is the lemma that it is impossible to distinguish two <em>non-orthogonal</em> quantum states without introducing a disturbance to either of them.
And the no-cloning theorem which guarantees that it is impossible to clone or copy a quantum state.
What QM taketh (impossible to fully know the complete state of a system) it giveth it away (a provably secure means of private key generation).</p>
</div>
<div class="paragraph">
<p>A great simulation of the protocol can be found <a href="https://www.st-andrews.ac.uk/physics/quvis/simulations_html5/sims/cryptography-b92/B92_photons.html">here</a></p>
</div>
<div class="paragraph">
<p>It is possible to write a python program to simulate B92. The <code>main</code> function looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #f8f8f8;"><code data-lang="python"><span></span>eavesdrop <span style="color: #666666">=</span> np<span style="color: #666666">.</span>random<span style="color: #666666">.</span>choice([<span style="color: #008000; font-weight: bold">True</span>, <span style="color: #008000; font-weight: bold">False</span>], size<span style="color: #666666">=</span>N_trials)
<span style="color: #008000; font-weight: bold">for</span> i <span style="color: #AA22FF; font-weight: bold">in</span> <span style="color: #008000">range</span>(<span style="color: #666666">0</span>, N_trials):
    (key, is_compromised) <span style="color: #666666">=</span> perform_b92_experiment(N_bits, N_test, eavesdrop[i])
    <span style="color: #008000; font-weight: bold">if</span> eavesdrop[i]:
        num_positive <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">if</span> is_compromised:
            true_positive <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            false_negative <span style="color: #666666">+=</span> <span style="color: #666666">1</span> <span style="color: #408080; font-style: italic"># Alice and Bob think the key is not compromised when in fact it has been compromised</span>
    <span style="color: #008000; font-weight: bold">else</span>:
        num_negative <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
        <span style="color: #008000; font-weight: bold">if</span> is_compromised:
            false_positive <span style="color: #666666">+=</span> <span style="color: #666666">1</span> <span style="color: #408080; font-style: italic"># Alice and Bob think the key is compromised when in fact it hasn&#39;t been compromised. This cannot happen with B92 protocol</span>
        <span style="color: #008000; font-weight: bold">else</span>:
            true_negative <span style="color: #666666">+=</span> <span style="color: #666666">1</span>
            key_length<span style="color: #666666">.</span>append(<span style="color: #008000">len</span>(key)) <span style="color: #408080; font-style: italic"># length of the shared key established between alice and bob</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>perform_b92_experiment</code> takes input 3 parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>N_bits</code>: The number of bits in \(a\), Alice&#8217;s binary string</p>
</li>
<li>
<p><code>N_test</code>: The (maximum) number of bits that will be used for testing whether the message or channel has been compromised by an eavesdropper</p>
</li>
<li>
<p><code>eavesdrop</code>: Whether to eavesdrop on the signal or not</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and returns 2 outputs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>key</code>: The shared secret</p>
</li>
<li>
<p><code>is_compromised</code>: Whether the protocol determines that the channel has been compromised</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Filling out <code>perform_b92_experiment</code> is left as an exercise. When I performed the experiment \(1000\) times with <code>N_bits=160</code> and <code>N_test=10</code>, this is what I found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>total trials =  1000
num positive =  507
num_negative =  493
true positive =  499
true negative =  493
false positive =  0
false negative =  8
Confusion Matrix
0.9842209072978304   0.015779092702169626
0.0   1.0
avg. key length =  30.352941176470587</pre>
</div>
</div>
<div class="paragraph">
<p>What do you get?</p>
</div>
<div class="paragraph">
<p>I then decided to try out the BB84 protocol. For BB84, this is what I got with identical settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>total trials =  1000
num positive =  493
num_negative =  507
true positive =  466
true negative =  507
false positive =  0
false negative =  27
Confusion Matrix
0.9452332657200812   0.05476673427991886
0.0   1.0
avg. key length =  70.23668639053254</pre>
</div>
</div>
<div class="paragraph">
<p>so we can see it has a higher error rate than B92. On the other hand the avg. key length is more than double than in case of B92.
In general, IBM&#8217;s <a href="https://qiskit.org/textbook/ch-algorithms/quantum-key-distribution.html">tutorial</a> for BB84 determines its error rate as \(p(\textrm{undetected}) = 0.75^t\)
where \(t\) is the number of bits used for testing. I initially thought the error rate for B92 will be the same but computer simulation says otherwise. Can we figure out error rate for B92?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="b92-error-analysis">B92 Error Analysis</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, note that the protocol cannot give any false positive. false positive = protocol determines channel has been spoofed when in fact it hasn&#8217;t. This cannot happen.
And that is true for BB84 as well. So the error rate is the rate of false negative. false negative = Alice and Bob think the channel is not compromised when in fact it has been compromised.
How can we calculate it? Below graph of possible outcomes provides the answer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/diag-626f6a7c5cdfe5fe9673e3a3a35e88ab.png" alt="Diagram" width="1111" height="282">
</div>
</div>
<div class="paragraph">
<p>It shows the case when Alice has a \(0\) bit to send to Bob. The only way this can go undetected in the presence of eavesdropping by Eve is shown by the two red paths and the probability is given by:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\begin{split}
p(\textrm{false negative}) &amp; = p(\textrm{Eve decides to measure in } Z) \\
                            &amp;  \times p(\textrm{Bob decides to measure in } X) \\
                            &amp;  \times p(\textrm{Bob measures } 1)  \\
                  &amp; + p(\textrm{Eve decides to measure in } X) \\
                  &amp; \times p(|0\rangle \textrm{ collapses to } |- \rangle \textrm{ after Eve's measurement}) \\
                  &amp; \times p(\textrm{Bob decides to measure in  } X) \\
                  &amp; = \frac{1}{2} \cdot \frac{1}{2} \cdot \frac{1}{2}  + \frac{1}{2} \cdot \frac{1}{2} \cdot \frac{1}{2} \\
                  &amp; = \frac{1}{4} (\textrm{incorrect})
\end{split}
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>Note that when Bob receives a \(|-\rangle\) which is an invalid state since Alice encodes \(0\) as \(|0\rangle\) and \(1\) as \(|+ \rangle\), there is no way for him to know that
he has received a \(|-\rangle\). All he can do is measure. The above formula is not the correct answer actually (and it took me a while to figure out). My simulations were giving
\(p(\textrm{false negative}) = 0.66\) and I just couldn&#8217;t figure out whether the simulations were incorrect or the analysis was incorrect.
As it happens, I kept pondering the whole day and could not determine which one is correct. Then next morning when I woke up, I realized. This happens very frequently.
I think the brain does an awful amount of work during sleeping but that is tpoic for another post.
 It turns out the analysis is incorrect, or rather
incomplete. Bob performs a test only when the measured qubit is a \(1\). We need to factor that in above by dividing \(0.25\) by the probability of observing a \(1\).
That means we need to exclude the paths colored in gray - those are the paths that end up with a \(0\) measurement by Bob. The probability of observing a \(1\) is given by:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\begin{split}
p(\textrm{1}) &amp; = \frac{1}{4} + \frac{1}{16} + \frac{1}{16} \\
              &amp; = \frac{3}{8}
\end{split}
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>Note very carefully that the <em>probability of Bob observing a \(1\) changes if Eve is listening on the channel</em>. Without Eve listening, this probability is \(0.25\) following the arguments earlier in the article
(refer Table 1). This provides us another way to test if channel has been compromised. The correct formula for \(p(\textrm{false negative})\) is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{align}
\begin{split}
p(\textrm{false negative}) &amp; = \frac{\frac{1}{4}}{\frac{3}{8}} \\
                           &amp; = \frac{2}{3} (\textrm{correct})
\end{split}
\end{align}\]
</div>
</div>
<div class="paragraph">
<p>There is a symmetric case when Alice has a \(1\) bit to send to Bob. It is shown below for completeness:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/diag-1daa1c4ed3114972004cfed7f664ec7b.png" alt="Diagram" width="594" height="276">
</div>
</div>
<div class="paragraph">
<p>Both cases have equal chance to happen so the overall error rate remains \(\frac{2}{3}\). So if we test using \(t\) bits, the error rate of B92 protocol is given by (deserves an equation of its own):</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
p(\textrm{false negative}) = \left( \frac{2}{3} \right) ^ t
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>Note carefully that above analysis (as well as the simulations I did) assumes Eve is also measuring in either \(Z\) or \(X\) with equal prob. This cannot be the case necessarily. In general Eve could
measure in a basis whose vectors form an angle \(\theta\) with \(Z\).</p>
</div>
<div class="paragraph">
<p>We can see that B92&#8217;s error rate is slightly better than BB84&#8217;s error rate. The BB84 protocol requires \(1.4\) times \(\left( \frac{\log(0.66)}{\log(0.75)} \right)\) as many bits as B92 to achieve the same error rate.
The improved error rate comes at the cost of shorter key length as I have seen in my simulations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="average-key-length">Average Key Length</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Can we derive formulae for the average key length of the two protocols? Yes we can. In case of BB84, the number of eligible bits is given by number of times the chosen bases between Alice and Bob match.
This has a \(50\%\) of chance of happening for each qubit independent of others. And so if \(n\) is the number of total qubits transmitted (also equal to length of Alice&#8217;s binary string):</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
\textrm{BB84: } \textrm{avg. key length} + \textrm{number of bits used for testing} = 0.5n
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>In case of B92, bits measured as \(0\) by Bob are discarded and \(1\) bits are kept. The probability of observing a \(1\) by Bob is \(0.25\) in absence of noise (eavesdropping).
And so the corresponding formula in case of B92 is:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{equation}
\textrm{B92: } \textrm{avg. key length} + \textrm{number of bits used for testing} = 0.25n
\end{equation}\]
</div>
</div>
<div class="paragraph">
<p>Now, given a desired error rate \(e\), and average key length \(l\), what should be \(n\) for the two protocols? Let&#8217;s do it for BB84 first.</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{split}
\begin{align}
\textrm{BB84: } l + \frac{\log(e)}{\log(0.75)} = 0.5n
\end{align}
\end{split}\]
</div>
</div>
<div class="paragraph">
<p>and so,</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{split}
\begin{align}
\textrm{BB84: } n &amp; = 2 \left( l + \frac{\log(e)}{\log(0.75)} \right) \\
                  &amp; \approx 2 l + 7.0 \log{\frac{1}{e}}
\end{align}
\end{split}\]
</div>
</div>
<div class="paragraph">
<p>In case of B92:</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{split}
\begin{align}
\textrm{B92: } l + \frac{\log(e)}{\log(0.66)} = 0.25n
\end{align}
\end{split}\]
</div>
</div>
<div class="paragraph">
<p>and so,</p>
</div>
<div class="stemblock">
<div class="content">
\[\begin{split}
\begin{align}
\textrm{B92: } n &amp; = 4 \left( l + \frac{\log(e)}{\log(0.66)} \right) \\
                &amp; \approx 4 l + 9.9 \log{\frac{1}{e}}
\end{align}
\end{split}\]
</div>
</div>
<div class="paragraph">
<p>The \(\log\) is w.r.t. natural base in above equations (i.e., \(\log(2.718281828459) = 1\)). Below are some numerical calculations with \(l = 32\) and varying \(e\) for the two protocols:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. BB84 vs B92: number of qubits required to get a desired error rate and average key length</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">e</th>
<th class="tableblock halign-left valign-top">BB84</th>
<th class="tableblock halign-left valign-top">B92</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">96</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">173</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">112</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">196</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.0001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">219</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.00001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">144</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">242</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0.000001</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">160</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">264</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">\(10^{-30}\)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">544</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">809</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. In physical terms given a photon, there is no way to know how Alice polarized it. All we can do is measure the polarization in some basis. That gives us the component of polarization along that basis and in the process the original state is destroyed.
</div>
</div>
  </div>

  <!-- from https://developers.facebook.com/docs/plugins/like-button/ -->
  <!-- page.url will give the URL of the page sans the domain name. refer https://jekyllrb.com/docs/variables/ -->
  <!-- more at https://www.digitalocean.com/community/tutorials/how-to-control-urls-and-links-in-jekyll -->
  <div class="fb-like" data-href="https://siddjain.github.io/2022/07/02/qkd.html" 
      data-width="" 
      data-layout="standard"
      data-action="like" 
      data-size="small"
      data-share="true"></div><a class="u-url" href="/2022/07/02/qkd.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">siddharth&#39;s space</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">siddharth&#39;s space</li><li><a class="u-email" href="mailto:siddjain@example.com">siddjain@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/siddjain"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">siddjain</span></a></li><li><a href="https://www.twitter.com/fd97207"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">fd97207</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>कोशिश करने वालो की कभी हार नहीं होती…</p>
      </div>
    </div>

  </div>

</footer>
<!-- refer https://github.com/asciidoctor/jekyll-asciidoc#adding-the-stem-assets-to-the-page --><!-- from https://github.com/asciidoctor/jekyll-asciidoc#adding-the-stem-assets-to-the-page -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    messageStyle: "none",
    tex2jax: {
        inlineMath: [["\\(", "\\)"]],
        displayMath: [["\\[", "\\]"]],
        ignoreClass: "nostem|nolatexmath"
    },
    asciimath2jax: {
        delimiters: [["\\$", "\\$"]],
        ignoreClass: "nostem|noasciimath"
    },
    TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script></body>

</html>